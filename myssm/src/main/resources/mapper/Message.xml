<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
        "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jj.myssm.dao.IMessageDAO">
    <resultMap id="ReslutMessage" type="com.jj.myssm.vo.Message">
        <id column="c_id" property="CId" jdbcType="INTEGER"/>
        <result column="c_userid" property="CUserId" jdbcType="VARCHAR"/>
        <result column="c_username" property="CUserName" jdbcType="VARCHAR"/>
        <result column="c_spid" property="CSpid" jdbcType="VARCHAR"/>
        <result column="c_spmc" property="CSpmc" jdbcType="VARCHAR"/>
        <result column="c_lxnr" property="CLxnr" jdbcType="VARCHAR"/>
        <result column="d_cjsj" property="DCjsj" jdbcType="DATE"/>
    </resultMap>
    <select id="getListMessage" resultMap="ReslutMessage" >
        select
        c_id,
        c_userid,
        c_username,
        c_spid,
        c_spmc,
        c_lxnr,
        d_cjsj
        from t_message
        LIMIT #{start},#{size}
    </select>
    <select id="countMessage" resultType="int">
        select count(1) from t_message
    </select>
    <update id="delete">
        DELETE from t_message where c_id = #{cid}
    </update>
    <insert id="add">
        insert into t_message
        (c_userid,
        c_username,
        c_spid,
        c_spmc,
        c_lxnr,
        d_cjsj) VALUES(
        #{CUserId},
        #{CUserName},
        #{CSpid},
        #{CSpmc},
        #{CLxnr},
        #{DCjsj}
        )
    </insert>
    <update id="update">
        update t_message
        set
        c_userid=#{CUserId},
        c_username=#{CUserName},
        c_spid=#{CSpid},
        c_spmc=#{CSpmc},
        c_lxnr=#{CLxnr},
        d_cjsj=#{DCjsj}where c_id=#{CId}
    </update>
    <select id="findByCid"  resultMap="ReslutMessage">
        SELECT
        c_id,
        c_userid,
        c_username,
        c_spid,
        c_spmc,
        c_lxnr,
        d_cjsj
        from t_message where c_id=#{cid}

    </select>
    <select id="findMoByMessage" resultMap="ReslutMessage">
        SELECT
        c_userid ,
        c_username,
        c_spid,
        c_spmc,
        c_lxnr,
        d_cjsj from t_message
        where c_spmc like CONCAT(CONCAT('%', #{CSpmc}), '%')
    </select>
</mapper>