<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
        "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jj.myssm.dao.IShopcartDAO">
    <resultMap id="ReslutShopcart" type="com.jj.myssm.vo.Shopcart">
        <id column="c_id" property="CId" jdbcType="INTEGER"/>
        <result column="c_userid" property="CUserId" jdbcType="VARCHAR"/>
        <result column="c_username" property="CUserName" jdbcType="VARCHAR"/>
        <result column="c_spid" property="CSpid" jdbcType="VARCHAR"/>
        <result column="c_spmc" property="CSpmc" jdbcType="VARCHAR"/>
        <result column="c_spdj" property="CSpdj" jdbcType="VARCHAR"/>
        <result column="c_spsl" property="CSpsl" jdbcType="VARCHAR"/>
        <result column="n_zs" property="NZs" jdbcType="INTEGER"/>
        <result column="f_zj" property="FZj" jdbcType="FLOAT"/>
        <result column="d_cjsj" property="DCjsj" jdbcType="DATE"/>
        <result column="d_gxsj" property="DGxsj" jdbcType="DATE"/>
    </resultMap>
    <select id="getListShopcart" resultMap="ReslutShopcart" >
        SELECT
        t_shopcart.c_id,
        t_shopcart.c_userid,
        t_shopcart.c_username,
        t_shopcart.c_spid,
        t_shopcart.c_spmc,
        t_shopcart.c_spdj,
        t_shopcart.c_spsl,
        t_shopcart.n_zs,
        t_shopcart.f_zj,
        t_shopcart.d_cjsj,
        t_shopcart.d_gxsj
        FROM
        t_shopcart
        <if test="start!= null and size != null">
            LIMIT #{start},#{size}
        </if>
    </select>
    <select id="countShopcart" resultType="int">
        select count(1) from t_shopcart
    </select>
    <delete id="delete">
        DELETE from t_shopcart where c_id = #{cid}
    </delete>
    <insert id="add">
      INSERT INTO `erjy`.`t_shopcart`
      ( `c_userid`, `c_username`, `c_spid`, `c_spmc`, `c_spdj`, `c_spsl`, `n_zs`, `f_zj`, `d_cjsj`, `d_gxsj` )
      VALUES
	(#{CUserId}, #{CUserName}, #{CSpid}, #{CSpmc},#{CSpdj},#{CSpsl},#{NZs,jdbcType=INTEGER},#{FZj,jdbcType=FLOAT},now(), now() )
    </insert>
    <update id="update">
      UPDATE `erjy`.`t_shopcart`
    SET `c_userid` = #{CUserId},
    `c_username` = #{CUserName},
    `c_spid` = #{CSpid},
    `c_spmc` = #{CSpmc},
    `c_spdj` = #{CSpdj},
    `c_spsl` = #{CSpsl},
    `n_zs` = #{NZs,jdbcType=INTEGER},
    `f_zj` = #{FZj,jdbcType=FLOAT},
    `d_gxsj` = now()
    WHERE
        `c_id` = #{CId};
    </update>
    <select id="findByCid" resultMap="ReslutShopcart">
      SELECT
        t_shopcart.c_id,
        t_shopcart.c_userid,
        t_shopcart.c_username,
        t_shopcart.c_spid,
        t_shopcart.c_spmc,
        t_shopcart.c_spdj,
        t_shopcart.c_spsl,
        t_shopcart.n_zs,
        t_shopcart.f_zj,
        t_shopcart.d_cjsj,
        t_shopcart.d_gxsj
        FROM
        t_shopcart
      where c_id=#{cid}
    </select>
    <select id="findMoByShopcart" resultMap="ReslutShopcart">
        SELECT
        t_shopcart.c_id,
        t_shopcart.c_userid,
        t_shopcart.c_username,
        t_shopcart.c_spid,
        t_shopcart.c_spmc,
        t_shopcart.c_spdj,
        t_shopcart.c_spsl,
        t_shopcart.n_zs,
        t_shopcart.f_zj,
        t_shopcart.d_cjsj,
        t_shopcart.d_gxsj
        FROM
        t_shopcart
      where c_spmc like CONCAT('%',#{CGjc},'%')
    </select>
</mapper>